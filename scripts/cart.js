(()=>{var t={572:()=>{var t=document.querySelector(".burger"),e=document.querySelector("#burger-toggle");e.addEventListener("click",(function(){t.classList.toggle("burger--active")}))}},e={};function n(r){var a=e[r];if(void 0!==a)return a.exports;var o=e[r]={exports:{}};return t[r](o,o.exports,n),o.exports}(()=>{"use strict";n(572);function t(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function e(e,n){if(e){if("string"==typeof e)return t(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?t(e,n):void 0}}function r(n){return function(e){if(Array.isArray(e))return t(e)}(n)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(n)||e(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var a=void 0,o=document.querySelectorAll(".select");function c(t){t.classList.toggle("select--opened")}function i(t,e){var n=e.target.textContent;t.textContent=n}o.forEach((function(t){var e=t.querySelector(".select__display"),n=t.querySelectorAll(".select__item");[e].concat(r(n)).forEach((function(e){return e.addEventListener("click",c.bind(a,t))})),n.forEach((function(t){return t.addEventListener("click",i.bind(a,e))}))}));function u(t){var e=t.target.value,n=t.target.min;e<0?t.target.value=0:e>99?t.target.value=99:""===e&&(t.target.value=n)}var l=function(t){return String(t).replace(/(\d)(?=(\d\d\d)+([^\d]|$))/g,"$1 ")},s=function(){return JSON.parse(localStorage.getItem("cart"))},d=document.querySelector(".list .card"),f=document.querySelector(".submit-form__price"),v=s();function m(){var t=s().reduce((function(t,e){return t+e.price*e.count}),0);f.textContent="".concat(l(t)," руб")}function y(t,n){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,a,o=[],c=!0,i=!1;try{for(n=n.call(t);!(c=(r=n.next()).done)&&(o.push(r.value),!e||o.length!==e);c=!0);}catch(t){i=!0,a=t}finally{try{c||null==n.return||n.return()}finally{if(i)throw a}}return o}}(t,n)||e(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}d.insertAdjacentHTML("beforeend",v&&v.length?'\n      <h2 class="card__title title title--md">'.concat(v.length,' товаров в корзине</h2>\n      <div class="card__wrapper">\n        ').concat(v.map((function(t){return'\n          <div class="cart-item">\n            <div class="cart-item__content">\n              <img src="https://dver.com/xml/images/'.concat(t.articul,'.jpeg" alt="').concat(t.name,'">\n              <h3 class="cart-item__name text text--sm">').concat(t.name,'</h3>\n            </div>\n            <p class="cart-item__sku">').concat(t.articul,"</p>\n            ").concat(function(){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return'\n  <div class="counter">\n    <input\n      type="number"\n      class="counter__display"\n      value="'.concat(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,'"\n      min="').concat(e,'"\n      max="99"\n      step="').concat(t,'"\n      data-multiplier\n    >\n    <input\n      type="button"\n      class="counter__action counter__action--decrement btn-reset"\n      value="-"\n      aria-label="Вычесть одну штуку"\n    >\n    <input\n      type="button"\n      class="counter__action counter__action--increment btn-reset"\n      value="+"\n      aria-label="Добавить одну штуку"\n    >\n  </div>\n')}(t.count,1,1),'\n            <h4 class="cart-item__price" data-price="').concat(t.price,'">').concat(l(t.price*t.count),' &#8381;</h4>\n            <button class="cart-item__delete btn-reset" aria-label="Удалить товар из корзины" data-index="').concat(t.index,'"></button>\n          </div>\n        ')})).join(""),"\n      </div>\n      "):'<h2 class="card__title title title--md">Корзина пустая</h2>'),m(),function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=document.querySelectorAll(".counter");r.forEach((function(t){var n=t.querySelector(".counter__display"),r={"-":n.stepDown.bind(n),"+":n.stepUp.bind(n)},a=t.querySelector(".counter__action--increment"),o=t.querySelector(".counter__action--decrement");n.addEventListener("input",u),[a,o].forEach((function(t){t.addEventListener("click",(function(t){var e=t.target.value;r[e]()}))})),e&&e.forEach((function(t){n.addEventListener("input",t),a.addEventListener("click",t),o.addEventListener("click",t)}))}))}((function(t){var e=t.target.closest(".cart-item"),n=e.querySelector(".cart-item__price"),r=+e.querySelector(".counter__display").value,a=n.dataset.price;n.textContent="".concat(l(a*r)," ₽");var o=s(),c=+e.querySelector(".cart-item__delete").dataset.index;o.find((function(t){return t.index===c})).count=r,localStorage.setItem("cart",JSON.stringify(o))}),m),d.querySelectorAll(".cart-item__delete").forEach((function(t){return t.addEventListener("click",(function(){var e,n,r;e=+t.dataset.index,n=s(),r=n.findIndex((function(t){return t.index===e})),n.splice(r,1),localStorage.setItem("cart",JSON.stringify(n)),t.closest(".cart-item").remove(),function(){var t=d.querySelector(".card__title"),e=s().length;if(!e)return t.textContent="Корзина пустая";t.textContent="".concat(e," товаров в корзине")}()}))}));var p="http://localhost:5000";function b(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return h(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return h(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,a=function(){};return{s:a,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,c=!0,i=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return c=t.done,t},e:function(t){i=!0,o=t},f:function(){try{c||null==n.return||n.return()}finally{if(i)throw o}}}}function h(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var _=document.querySelector(".submit-form"),g=_.querySelector(".submit-form__submit");_.addEventListener("submit",(function(t){t.preventDefault();var e=t.target,n=e.querySelector(".select"),a=n.querySelector(".select__display");if(!r(n.querySelectorAll(".select__item")).find((function(t){return t.textContent===a.textContent})))return alert("Укажите тип получения");var o,c=new FormData(e),i=[{name:"type",value:a.textContent}],u=b(c);try{for(u.s();!(o=u.n()).done;){var l=y(o.value,2),d=l[0],f=l[1];i.push({name:d,value:f})}}catch(t){u.e(t)}finally{u.f()}var v=s();if(!v||!v.length)return alert("Корзина не должна быть пустой");g.setAttribute("disabled",""),function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return fetch("".concat(p).concat(t),e)}("/order",{method:"POST",body:JSON.stringify({userData:i,order:v}),headers:{"Content-Type":"application/json"}}).then((function(){g.removeAttribute("disabled"),alert("Ваш заказ был оформлен. Вам перезвонит наш менеджер")}))}))})()})();