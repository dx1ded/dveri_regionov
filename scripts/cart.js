(()=>{var t={572:()=>{var t=document.querySelector(".burger"),e=document.querySelector("#burger-toggle");e.addEventListener("click",(function(){t.classList.toggle("burger--active")}))}},e={};function n(r){var a=e[r];if(void 0!==a)return a.exports;var o=e[r]={exports:{}};return t[r](o,o.exports,n),o.exports}(()=>{"use strict";var t=function(){return JSON.parse(localStorage.getItem("cart"))},e=function(){return t().length},r=function(){var t=e(),n=document.querySelector("#cart-item"),r=n.querySelector("span");t?(n.setAttribute("data-is-not-empty",""),r.textContent=t):(n.removeAttribute("data-is-not-empty",""),r.textContent="")};n(572);function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function o(t,e){if(t){if("string"==typeof t)return a(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(t,e):void 0}}function c(t){return function(t){if(Array.isArray(t))return a(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||o(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var i=void 0,u=document.querySelectorAll(".select");function l(t){t.classList.toggle("select--opened")}function s(t,e){var n=e.target.textContent;t.textContent=n}u.forEach((function(t){var e=t.querySelector(".select__display"),n=t.querySelectorAll(".select__item");[e].concat(c(n)).forEach((function(e){return e.addEventListener("click",l.bind(i,t))})),n.forEach((function(t){return t.addEventListener("click",s.bind(i,e))}))}));function d(t){var e=t.target.value,n=t.target.min;e<0?t.target.value=0:e>99?t.target.value=99:""===e&&(t.target.value=n)}var f=function(t){return String(t).replace(/(\d)(?=(\d\d\d)+([^\d]|$))/g,"$1 ")},m=document.querySelector(".list .card"),v=document.querySelector(".submit-form__price"),y=t();function p(){var e=t().reduce((function(t,e){return t+e.price*e.count}),0);v.textContent="".concat(f(e)," руб")}function b(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,a,o=[],c=!0,i=!1;try{for(n=n.call(t);!(c=(r=n.next()).done)&&(o.push(r.value),!e||o.length!==e);c=!0);}catch(t){i=!0,a=t}finally{try{c||null==n.return||n.return()}finally{if(i)throw a}}return o}}(t,e)||o(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}m.insertAdjacentHTML("beforeend",y&&y.length?'\n      <h2 class="card__title title title--md">'.concat(y.length,' товаров в корзине</h2>\n      <div class="card__wrapper">\n        ').concat(y.map((function(t){return'\n          <div class="cart-item">\n            <div class="cart-item__content">\n              <img src="https://dver.com/xml/images/'.concat(t.articul,'.jpeg" alt="').concat(t.name,'">\n              <h3 class="cart-item__name text text--sm">').concat(t.name,'</h3>\n            </div>\n            <p class="cart-item__sku">').concat(t.articul,"</p>\n            ").concat(function(){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return'\n  <div class="counter">\n    <input\n      type="number"\n      class="counter__display"\n      value="'.concat(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,'"\n      min="').concat(e,'"\n      max="99"\n      step="').concat(t,'"\n      data-multiplier\n    >\n    <input\n      type="button"\n      class="counter__action counter__action--decrement btn-reset"\n      value="-"\n      aria-label="Вычесть одну штуку"\n    >\n    <input\n      type="button"\n      class="counter__action counter__action--increment btn-reset"\n      value="+"\n      aria-label="Добавить одну штуку"\n    >\n  </div>\n')}(t.count,1,1),'\n            <h4 class="cart-item__price" data-price="').concat(t.price,'">').concat(f(t.price*t.count),' &#8381;</h4>\n            <button class="cart-item__delete btn-reset" aria-label="Удалить товар из корзины" data-index="').concat(t.index,'"></button>\n          </div>\n        ')})).join(""),"\n      </div>\n      "):'<h2 class="card__title title title--md">Корзина пустая</h2>'),p(),function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=document.querySelectorAll(".counter");r.forEach((function(t){var n=t.querySelector(".counter__display"),r={"-":n.stepDown.bind(n),"+":n.stepUp.bind(n)},a=t.querySelector(".counter__action--increment"),o=t.querySelector(".counter__action--decrement");n.addEventListener("input",d),[a,o].forEach((function(t){t.addEventListener("click",(function(t){var e=t.target.value;r[e]()}))})),e&&e.forEach((function(t){n.addEventListener("input",t),a.addEventListener("click",t),o.addEventListener("click",t)}))}))}((function(e){var n=e.target.closest(".cart-item"),r=n.querySelector(".cart-item__price"),a=+n.querySelector(".counter__display").value,o=r.dataset.price;r.textContent="".concat(f(o*a)," ₽");var c=t(),i=+n.querySelector(".cart-item__delete").dataset.index;c.find((function(t){return t.index===i})).count=a,localStorage.setItem("cart",JSON.stringify(c))}),p),m.querySelectorAll(".cart-item__delete").forEach((function(n){return n.addEventListener("click",(function(){var a,o,c;a=+n.dataset.index,o=t(),c=o.findIndex((function(t){return t.index===a})),o.splice(c,1),localStorage.setItem("cart",JSON.stringify(o)),n.closest(".cart-item").remove(),function(){var t=m.querySelector(".card__title"),n=e();if(!n)return t.textContent="Корзина пустая";t.textContent="".concat(n," товаров в корзине")}(),p(),r()}))}));var _="".concat(location.origin,"/api");function g(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return h(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return h(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,a=function(){};return{s:a,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,c=!0,i=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return c=t.done,t},e:function(t){i=!0,o=t},f:function(){try{c||null==n.return||n.return()}finally{if(i)throw o}}}}function h(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var S=document.querySelector(".submit-form"),x=S.querySelector(".submit-form__submit");S.addEventListener("submit",(function(e){e.preventDefault();var n=e.target,r=n.querySelector(".select"),a=r.querySelector(".select__display");if(!c(r.querySelectorAll(".select__item")).find((function(t){return t.textContent===a.textContent})))return alert("Укажите тип получения");var o,i=new FormData(n),u=[{name:"type",value:a.textContent}],l=g(i);try{for(l.s();!(o=l.n()).done;){var s=b(o.value,2),d=s[0],f=s[1];u.push({name:d,value:f})}}catch(t){l.e(t)}finally{l.f()}var m=t();if(!m||!m.length)return alert("Корзина не должна быть пустой");x.setAttribute("disabled",""),function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return fetch("".concat(_).concat(t),e)}("/order",{method:"POST",body:JSON.stringify({userData:u,order:m}),headers:{"Content-Type":"application/json"}}).then((function(){x.removeAttribute("disabled"),alert("Ваш заказ был оформлен. Вам перезвонит наш менеджер")}))})),r()})()})();